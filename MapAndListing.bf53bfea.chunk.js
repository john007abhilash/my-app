"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[950],{1494:(e,o,t)=>{t.r(o),t.d(o,{default:()=>C});var n=t(5043),s=t(4732),i=t(9712),l=t(9942),d=t(579);const r=e=>{let{apiKey:o,center:t,cloudList:s,userLocation:i,setSortedCloudLocations:r,inputState:c}=e;const[a,u]=(0,n.useState)(null),[g,p]=(0,n.useState)(null),[m,h]=(0,n.useState)(null),{isLoaded:x}=(0,l.KD)({id:"google-map-script",googleMapsApiKey:o});(0,n.useEffect)((()=>{C(a)}),[c.selectedCloudOption,c.minCount]);const j=(0,n.useCallback)((e=>{u(e),f()}),[]),L=(0,n.useCallback)((()=>{u(null)}),[]),f=async()=>{try{const e=await google.maps.importLibrary("geometry"),o=await google.maps.importLibrary("geocoding");h({geometryLib:e,geoCodingLib:o})}catch(e){const o=e;console.error("Unable to import google libraries with error as ".concat(o.message))}},C=e=>{if(e&&m){(new m.geoCodingLib.Geocoder).geocode({location:i},((o,t)=>{if(t===google.maps.GeocoderStatus.OK&&i){const o=b(i,s,m);r(o);const t=new google.maps.LatLngBounds,n=new google.maps.LatLng({...i});t.extend(n);o.slice(0,c.minCount<=0?1:c.minCount).forEach((e=>{const o=new google.maps.LatLng({lat:e.geo_latitude,lng:e.geo_longitude});t.extend(o)})),e.fitBounds(t),e.panToBounds(t)}}))}},y=(e,o,t)=>t.geometryLib.spherical.computeDistanceBetween(new google.maps.LatLng(e.lat,e.lng),new google.maps.LatLng(o.lat,o.lng)),b=(e,o,t)=>{if(e){return o.map((o=>({...o,dist:y(e,{lat:o.geo_latitude,lng:o.geo_longitude},t)}))).sort(((e,o)=>e.dist-o.dist))}return[]},_=e=>{const o=new google.maps.LatLng({lat:e.geo_latitude,lng:e.geo_longitude});return(0,d.jsx)("div",{children:(0,d.jsx)(l.pH,{position:o,zIndex:100,title:e.cloud_description,onClick:()=>{var o;return(e=>{e!==g&&p(e)})(null!==(o=e.cloud_description)&&void 0!==o?o:"")},children:g===e.cloud_description?(0,d.jsx)(l.Fu,{onCloseClick:()=>p(null),children:(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{children:e.cloud_description}),(0,d.jsx)("div",{children:e.provider_description})]})},e.cloud_description):null},e.cloud_description)},e.cloud_description)};return x&&C(a),x?(0,d.jsxs)(l.u6,{mapContainerClassName:"cloud-map",center:t,zoom:7,onLoad:j,onUnmount:L,children:[(0,d.jsx)(d.Fragment,{children:(e=>e.map((e=>_(e))).filter((e=>void 0!==e)))(s)}),(0,d.jsx)(d.Fragment,{children:(e=>{if(e){const o=new google.maps.LatLng({lat:e.lat,lng:e.lng}),t={url:"https://developers.google.com/maps/documentation/javascript/examples/full/images/beachflag.png"};return(0,d.jsx)(l.pH,{position:o,zIndex:1e3,icon:t})}})(i)})]}):(0,d.jsx)("div",{children:"Map is not loaded yet, please wait."})},c=(0,n.memo)(r);var a=t(8938),u=t(6446),g=t(4535),p=t(3336),m=t(6975);const h=e=>e&&e[0]?(0,d.jsx)("thead",{children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{children:"No."}),(0,d.jsx)("th",{children:"Description"}),(0,d.jsx)("th",{children:"Latitude"}),(0,d.jsx)("th",{children:"Longitude"}),"dist"in e[0]&&(0,d.jsx)("th",{children:"Distance in meters"})]})}):null,x=e=>{let{cloudLocations:o}=e;return(0,d.jsxs)("table",{children:[h(o),(0,d.jsx)("tbody",{children:o.map(((e,o)=>{return(0,d.jsxs)("tr",{className:"map-desc",children:[(0,d.jsxs)("td",{children:[o+1,"."]}),(0,d.jsxs)("td",{className:"first",children:[e.cloud_description," "]}),(0,d.jsxs)("td",{className:"second",children:[e.geo_latitude," "]}),(0,d.jsxs)("td",{className:"third",children:[e.geo_longitude," "]}),(t=e,"dist"in t?(0,d.jsx)("td",{className:"forth",children:(0,m.LI)(t.dist)}):null)]},e.cloud_description);var t}))})]})},j=(0,n.memo)(x),L=(0,g.Ay)(p.A)((e=>{let{theme:o}=e;return{backgroundColor:"dark"===o.palette.mode?"#1A2027":"#fff",...o.typography.body2,padding:o.spacing(1),textAlign:"center",color:o.palette.text.secondary}})),f=e=>{const{userLocation:o,cloudLocations:t,sortedCloudLocations:n,inputState:l,setSortedCloudLocations:r}=e;return(0,d.jsx)(u.A,{sx:{width:"100%",alignItems:"center"},children:(0,d.jsxs)(s.Ay,{container:!0,spacing:1,children:[(0,d.jsx)(s.Ay,{item:!0,lg:8,xs:12,children:(0,d.jsx)(L,{children:(0,d.jsx)(i.A,{fallback:(0,d.jsx)("div",{children:"Error loading map."}),children:(0,d.jsx)(c,{apiKey:a.rp,center:a.Q7,cloudList:t,userLocation:o,setSortedCloudLocations:r,inputState:l})})})}),(0,d.jsx)(s.Ay,{item:!0,lg:4,xs:12,children:(0,d.jsx)(L,{children:(0,d.jsxs)(i.A,{children:[o?(0,d.jsx)("p",{children:"Sorted Cloud Locations"}):(0,d.jsx)("p",{children:"Unsorted Cloud Locations"}),(0,d.jsx)("div",{className:"more-info-container",children:o?(0,d.jsx)(j,{cloudLocations:n}):(0,d.jsx)(j,{cloudLocations:t})})]})})})]})})},C=(0,n.memo)(f)}}]);
//# sourceMappingURL=MapAndListing.bf53bfea.chunk.js.map